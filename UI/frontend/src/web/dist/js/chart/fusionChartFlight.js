
const dataSource = {

};
// var json =[
//     {
//         operation_type:"Parking Area Clear",
//         status:"start",
//         event_time:"00:30:00"
//     },{
//
//         operation_type:"Parking Area Clear",
//         status:"end",
//         event_time:"03:30:40"
//     },
//     {
//         operation_type:"Aircraft Parked",
//         status:"start",
//         event_time:"04:40:00"
//     },{
//         operation_type:"Aircraft Parked",
//         status:"end",
//         event_time:"5:00:00 ",
//     },{
//         operation_type:"Staircase/PBB",
//         status:"start",
//         event_time:"6:00:00"
//     },{
//         operation_type:"Staircase/PBB",
//         status:"end",
//         event_time:"7:00:00"
//     },
//     {
//         operation_type:"Aircraft Arriving",
//         status:"start",
//         event_time:"03:00:00"
//     },
//     {
//         operation_type:"Aircraft Arriving",
//         status:"end",
//         event_time:"05:06:00"
//     },
//     {
//         operation_type:"Tyre Blocks Applied",
//         status:"start",
//         event_time:"5:40:00"
//     },
//     {
//         operation_type:"Tyre Blocks Applied",
//         status:"end",
//         event_time:"6:40:00"
//     },{
//         operation_type:"Cargo Operation",
//         status:"start",
//         event_time:"6:40:00"
//     },{
//         operation_type:"Cargo Operation",
//         status:"end",
//         event_time:"7:40:00"
//     },{
//         operation_type:"Fuel Operation",
//         status:"start",
//         event_time:"7:40:00"
//     },{
//         operation_type:"Fuel Operation",
//         status:"end",
//         event_time:"8:40:00"
//     },{
//         operation_type:"Catering Operation",
//         status:"start",
//         event_time:"8:40:00"
//     },{
//         operation_type:"Catering Operation",
//         status:"end",
//         event_time:"10:40:00"
//     },{
//         operation_type:"GPU Operation",
//         status:"start",
//         event_time:"10:40:00"
//     },{
//         operation_type:"GPU Operation",
//         status:"end",
//         event_time:"12:40:00"
//     },{
//         operation_type:"AC Operation",
//         status:"start",
//         event_time:"10:40:00"
//     },{
//         operation_type:"AC Operation",
//         status:"end",
//         event_time:"11:40:00"
//     },
//     {
//         operation_type:"WV/LV Operation",
//         status:"start",
//         event_time:"10:40:00"
//     },
//     {
//         operation_type:"WV/LV Operation",
//         status:"end",
//         event_time:"12:40:00"
//     },{
//         operation_type:"Aircraft Towing Away",
//         status:"start",
//         event_time:"12:40:00"
//     },{
//         operation_type:"Aircraft Towing Away",
//         status:"end",
//         event_time:"13:40:00"
//     },
//
// ];



var taskDXb=[
    {
        processid: "EMP120",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Running"
    },
    {
        processid: "EMP120",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP120",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP120",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP120",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP120",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP121",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },
    {
        processid: "EMP121",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },
    {
        processid: "EMP121",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },
    {
        processid: "EMP121",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },
    {
        processid: "EMP121",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },
    {
        processid: "EMP121",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Eve"
    },
    {
        processid: "EMP122",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP122",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP122",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP122",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP122",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP122",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP123",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP123",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP123",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP123",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP123",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP123",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Morning Shift"
    },
    {
        processid: "EMP124",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },{
        processid: "EMP124",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },{
        processid: "EMP124",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },{
        processid: "EMP124",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },{
        processid: "EMP124",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },{
        processid: "EMP124",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Afternoon Shift"
    },
    {
        processid: "EMP125",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Early Morning support"
    },{
        processid: "EMP125",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Early Morning support"
    },{
        processid: "EMP125",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Early Morning support"
    },{
        processid: "EMP125",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Early Morning support"
    },{
        processid: "EMP125",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Early Morning support"
    },{
        processid: "EMP125",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Early Morning support"
    },
    {
        processid: "EMP126",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP126",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP126",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP126",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP126",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP126",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP127",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP127",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP127",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP127",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP127",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP127",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP128",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP128",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP128",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP128",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP128",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP128",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP129",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP129",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP129",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP129",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP129",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP129",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP130",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP130",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP130",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP130",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP130",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP130",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },
    {
        processid: "EMP131",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP131",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP131",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP131",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP131",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    },{
        processid: "EMP131",
        start: "00:00:00",
        end: "00:00:00",
        height: "8",
        topPadding:"8"
        // label: "Half Day"
    }
];
var update_task_end_flags = Array(taskDXb.length).fill(0);
FusionCharts.ready(function() {

    var chartconf={
        dateformat: "dd/mm/yyyy",
        outputdateformat: "dd/mm/yyyy hh12:mn:ss ampm",
        canvasborderalpha: "40",
        ganttlinealpha: "50",
        theme: "candy",

    };
    setTimeout(function() {
        var json=JSON.parse(localStorage.getItem('logsdata'));
        // for(k=0;json.length;k++){
        //
        // }
        // localStorage.removeItem('logsdata');

        var d = Date.now();
        d = new Date(d);
        d = d.getHours()+':'+d.getMinutes()+':'+d.getSeconds();
        var item_list=['Parking Area Clear','Aircraft Arriving','Aircraft Parked','Tyre Blocks Applied','Staircase/PBB','Cargo Operation','Fuel Operation','Catering Operation','GPU Operation','AC Operation','WV/LV Operation','Aircraft Towing Away'];
        var operation_counter=Array(item_list.length).fill(0);
        for(k=0;k<item_list.length;k++){
            for(i=0;i<json.length;i++){
                if(json[i].operation_type==item_list[k]){
                    if (json[i].operation_status=='start'){
                        //alert(item_list[k])
                        taskDXb[k*6+operation_counter[k]].start=json[i].event_time
                        // taskDXb[k*2+operation_counter[k]].label = json[i].operation_type;
                    }
                    if (json[i].operation_status=='end'){
                        taskDXb[k*6+operation_counter[k]].end=json[i].event_time;
                        taskDXb[k*6+operation_counter[k]].status = 'end';
                        // taskDXb[k*6+operation_counter[k]].label = 'Completed'
                        operation_counter[k]=operation_counter[k]+1;
                    }
                }
            }
        }
        for(j=0;j<taskDXb.length;j++){
            if (taskDXb[j].start != '00:00:00' && taskDXb[j].end=='00:00:00' || taskDXb[j].status =='Running' ){
                taskDXb[j].end=d;
                taskDXb[j].status = 'Running'

            }
        }

        console.log(taskDXb);

        // console.log(taskDXb);



        myChart.setJSONData({
            tasks: {
                showlabels: "1",
                color: "#5D62B5",
                task: taskDXb
            },
            milestones: {
                milestone: [
                    {
                        time: "09:00:00",
                        processid: "EMP122",
                        color: "#F2726F",
                        shape: "star",
                        tooltext: "Prototyping Approved"
                    }
                ]
            },
            processes: {
                fontsize: "12",
                isbold: "1",
                align: "Center",
                headertext: "Events",
                headerfontsize: "14",
                headervalign: "middle",
                headeralign: "center",
                headerbgcolor:"#262a33",
                process: [
                    {
                        label: "Parking Area Clear",
                        labelalign:"left",
                        id: "EMP120"
                    },
                    {
                        label: "Aircraft Arriving",
                        id: "EMP121"
                    },
                    {
                        label: "Aircraft Parked",
                        id: "EMP122"
                    },
                    {
                        label: "Tyre Blocks Applied",
                        id: "EMP123"
                    },
                    {
                        label: "PBS Connected",
                        id: "EMP124"
                    },
                    {
                        label: "Cargo Operation",
                        id: "EMP125"
                    },
                    {
                        label: "Fuel Operation",
                        id: "EMP126"
                    },
                    {
                        label: "CAT Operation",
                        id: "EMP127"
                    },
                    {
                        label: "GPU Operation",
                        id: "EMP128"
                    },
                    {
                        label: "AC Operation",
                        id: "EMP129"
                    },
                    {
                        label: "WV/LV Operation",
                        id: "EMP130"
                    },
                    {
                        label: "Aircraft Towed to Runway",
                        id: "EMP131"
                    }

                ]
            },
            categories: [
                {
                    category: [
                        {
                            start: localStorage.getItem('flightArrivalTime'),
                            end: localStorage.getItem('flightDepartureTime'),
                            label: "Time"
                        }
                    ]
                }, {
                    align: "center",
                    category: [
                        {
                            start: localStorage.getItem('flightArrivalTime'),
                            end: localStorage.getItem('flightDepartureTime'),
                            label: localStorage.getItem('flightArrivalTime') +"  --  "+ localStorage.getItem('flightDepartureTime')
                        },
                    ]
                }
            ],
            chart: chartconf
        })




    }, 2000);
    var myChart = new FusionCharts({
        type: "gantt",
        renderAt: "chart-container",
        width: "100%",
        height: "560",
        dataFormat: "json",
        containerBackgroundOpacity: '0',
        dataSource:{
            tasks: {
                showlabels: "1",
                color: "#5D62B5"
            },
            processes: {
                fontsize: "12",
                isbold: "1",
                align: "Center",
                headertext: "Events",
                headerfontsize: "14",
                headervalign: "middle",
                headeralign: "center",
                process: [
                    {
                        label: "Parking Area Clear",
                        id: "EMP120"
                    },
                    {
                        label: "Aircraft arriving",
                        id: "EMP121"
                    },
                    {
                        label: "Aircraft parked",
                        id: "EMP122"
                    },
                    {
                        label: "Tyre block applied",
                        id: "EMP123"
                    },
                    {
                        label: "PBS Connected",
                        id: "EMP124"
                    },
                    {
                        label: "Cargo operation",
                        id: "EMP125"
                    },
                    {
                        label: "Fuel operation",
                        id: "EMP126"
                    },
                    {
                        label: "CAT operation",
                        id: "EMP127"
                    },
                    {
                        label: "GPU operation",
                        id: "EMP128"
                    },
                    {
                        label: "AC operation",
                        id: "EMP129"
                    },
                    {
                        label: "WV operation",
                        id: "EMP130"
                    },
                    {
                        label: "Aircraft towed to runway",
                        id: "EMP131"
                    }

                ]
            },
            categories: [
                {
                    bgcolor: "#262a33",
                    category: [
                        {
                            start: localStorage.getItem('flightArrivalTime'),
                            end: localStorage.getItem('flightDepartureTime'),
                            label: "Time"
                        }
                    ]
                }
            ],
            chart: chartconf
        }
    }).render();


});



